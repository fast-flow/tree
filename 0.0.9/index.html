<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge" ></meta>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
<!–[if IE 8]>
<script src="doc/vendor/polyfill/main.js" ></script>
<![endif]–>
<script src="doc/vendor/react/0.14.8/react.js" ></script>
<script src="doc/vendor/react/0.14.8/react-dom.js" ></script>
<style>
/* http://cdn.bootcss.com/highlight.js/9.6.0/styles/atom-one-dark.min.css */
pre { background: rgb(33,37,46); border-radius: 5px; padding: .5em 1em; color:rgb(155,162,178); }
.hljs{display:block;overflow-x:auto;padding:0.5em;color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-keyword,.hljs-formula{color:#c678dd}.hljs-section,.hljs-name,.hljs-selector-tag,.hljs-deletion,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-string,.hljs-regexp,.hljs-addition,.hljs-attribute,.hljs-meta-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-variable,.hljs-template-variable,.hljs-type,.hljs-selector-class,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-number{color:#d19a66}.hljs-symbol,.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}.hljs-link{text-decoration:underline}

.markdown-body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 16px; line-height: 1.5; word-wrap: break-word } .markdown-body::before { display: table; content: "" } .markdown-body::after { display: table; clear: both; content: "" } .markdown-body>*:first-child { margin-top: 0 !important } .markdown-body>*:last-child { margin-bottom: 0 !important } .markdown-body a:not([href]) { color: inherit; text-decoration: none } .markdown-body .absent { color: #c00 } .markdown-body .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1 } .markdown-body .anchor:focus { outline: none } .markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre { margin-top: 0; margin-bottom: 16px } .markdown-body hr { height: 0.25em; padding: 0; margin: 24px 0; background-color: #e7e7e7; border: 0 } .markdown-body blockquote { padding: 0 1em; color: #777; border-left: 0.25em solid #ddd } .markdown-body blockquote>:first-child { margin-top: 0 } .markdown-body blockquote>:last-child { margin-bottom: 0 } .markdown-body kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: #555; vertical-align: middle; background-color: #fcfcfc; border: solid 1px #ccc; border-bottom-color: #bbb; border-radius: 3px; box-shadow: inset 0 -1px 0 #bbb } .markdown-body .loweralpha { list-style-type: lower-alpha } .markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25 } .markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link { color: #000; vertical-align: middle; visibility: hidden } .markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor { text-decoration: none } .markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link { visibility: visible } .markdown-body h1 tt,.markdown-body h1 code,.markdown-body h2 tt,.markdown-body h2 code,.markdown-body h3 tt,.markdown-body h3 code,.markdown-body h4 tt,.markdown-body h4 code,.markdown-body h5 tt,.markdown-body h5 code,.markdown-body h6 tt,.markdown-body h6 code { font-size: inherit } .markdown-body h1 { padding-bottom: 0.3em; font-size: 2em; border-bottom: 1px solid #eee } .markdown-body h2 { padding-bottom: 0.3em; font-size: 1.5em; border-bottom: 1px solid #eee } .markdown-body h3 { font-size: 1.25em } .markdown-body h4 { font-size: 1em } .markdown-body h5 { font-size: 0.875em } .markdown-body h6 { font-size: 0.85em; color: #777 } .markdown-body ul,.markdown-body ol { padding-left: 2em } .markdown-body ul.no-list,.markdown-body ol.no-list { padding: 0; list-style-type: none } .markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul { margin-top: 0; margin-bottom: 0 } .markdown-body li>p { margin-top: 16px } .markdown-body li+li { margin-top: 0.25em } .markdown-body dl { padding: 0 } .markdown-body dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold } .markdown-body dl dd { padding: 0 16px; margin-bottom: 16px } .markdown-body table { display: block; width: 100%; overflow: auto } .markdown-body table th { font-weight: bold } .markdown-body table th,.markdown-body table td { padding: 6px 13px; border: 1px solid #ddd } .markdown-body table tr { background-color: #fff; border-top: 1px solid #ccc } .markdown-body table tr:nth-child(2n) { background-color: #f8f8f8 } .markdown-body img { max-width: 100%; box-sizing: content-box; background-color: #fff } .markdown-body img[align=right] { padding-left: 20px } .markdown-body img[align=left] { padding-right: 20px } .markdown-body .emoji { max-width: none; vertical-align: text-top; background-color: transparent } .markdown-body span.frame { display: block; overflow: hidden } .markdown-body span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid #ddd } .markdown-body span.frame span img { display: block; float: left } .markdown-body span.frame span span { display: block; padding: 5px 0 0; clear: both; color: #333 } .markdown-body span.align-center { display: block; overflow: hidden; clear: both } .markdown-body span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center } .markdown-body span.align-center span img { margin: 0 auto; text-align: center } .markdown-body span.align-right { display: block; overflow: hidden; clear: both } .markdown-body span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right } .markdown-body span.align-right span img { margin: 0; text-align: right } .markdown-body span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden } .markdown-body span.float-left span { margin: 13px 0 0 } .markdown-body span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden } .markdown-body span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right } .markdown-body code,.markdown-body tt { padding: 0; padding-top: 0.2em; padding-bottom: 0.2em; margin: 0; font-size: 85%; background-color: rgba(0,0,0,0.04); border-radius: 3px } .markdown-body code::before,.markdown-body code::after,.markdown-body tt::before,.markdown-body tt::after { letter-spacing: -0.2em; content: "\00a0" } .markdown-body code br,.markdown-body tt br { display: none } .markdown-body del code { text-decoration: inherit } .markdown-body pre { word-wrap: normal } .markdown-body pre>code { padding: 0; margin: 0; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0 } .markdown-body .highlight { margin-bottom: 16px } .markdown-body .highlight pre { margin-bottom: 0; word-break: normal } .markdown-body .highlight pre,.markdown-body pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45;  border-radius: 3px } .markdown-body pre code,.markdown-body pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0 } .markdown-body pre code::before,.markdown-body pre code::after,.markdown-body pre tt::before,.markdown-body pre tt::after { content: normal }
html body {
    width:1100px;
    margin-left: auto;
    margin-right: auto;
}
</style>
<title> tree-store</title>
</head>
<body class="markdown-body" >
<h1 id="tree-store">tree-store</h1>
<blockquote>
<p>The methods of gaining valid data quickly based on the trees of data | 基于树形数据,能够快速获取有效数据的方法集</p>
</blockquote>
<!--MARKRUN-HTML
<iframe src="https://ghbtns.com/github-btn.html?user=fast-flow&repo=tree-store&type=star&count=true" frameborder="0" scrolling="0" width="100px" height="30px"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=fast-flow&repo=tree-store&type=watch&count=true&v=2" frameborder="0" scrolling="0" width="100px" height="30px">
-->
<p><a href="https://fast-flow.github.io/tree-store/">🔗 Live demo</a><br><a href="https://github.com/fast-flow/tree-store/releases">🕐 Releases</a></p>
<p><a href="https://travis-ci.org/fast-flow/tree-store"><img src="https://api.travis-ci.org/fast-flow/tree-store.svg" alt="Build Status"></a> <a href="https://npmjs.org/package/tree-store"><img src="https://img.shields.io/npm/v/tree-store.svg?style=flat" alt="NPM version"></a> <a href="https://npmjs.org/package/tree-store"><img src="http://img.shields.io/npm/dm/tree-store.svg?style=flat" alt="NPM downloads"></a></p>
<h2 id="-">数据</h2>
<blockquote>
<p>所有id请保证唯一性,当 ID 出现重复时,组件会抛出错误<br>标准JSON格式</p>
</blockquote>
<h3 id="-">模板数据源</h3>
<blockquote>
<p>所有的API都基于 两个主要key: <strong>id</strong> <strong>child</strong> , 可以存在任意符合json规则的其他keyname</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports) {

		"use strict";

		window.template_data = [{
			"id": "1",
			"text": "text-1",
			"child": [{
				"id": "1_1",
				"text": "text-1_1",
				"child": [{
					"id": "1_1_1",
					"text": "text-1_1_1",
					"child": [{
						"id": "1_1_1_1",
						"text": "text-1_1_1_1"
					}, {
						"id": "1_1_1_2",
						"text": "text-1_1_1_2"
					}]
				}, {
					"id": "1_1_2",
					"text": "text-1_1_2"
				}]
			}, {
				"id": "1_2",
				"text": "text-1_2",
				"child": [{
					"id": "1_2_1",
					"text": "text-1_2_1"
				}, {
					"id": "1_2_2",
					"text": "text-1_2_2"
				}]
			}]
		}, {
			"id": "2",
			"text": "text-2",
			"child": [{
				"id": "2_1",
				"text": "text-2_1",
				"child": []
			}, {
				"id": "2_2",
				"text": "text-2_2",
				"child": []
			}]
		}, {
			"id": "3",
			"text": "text-3",
			"child": []
		}];

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-built_in">window</span>.template_data  =  [
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1"</span>,
        <span class="hljs-string">"child"</span> : [
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1"</span>,
                <span class="hljs-string">"child"</span> : [
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1_1"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1_1"</span>,
                        <span class="hljs-string">"child"</span> :  [
                            {
                                <span class="hljs-string">"id"</span> :  <span class="hljs-string">"1_1_1_1"</span>,
                                <span class="hljs-string">"text"</span> :  <span class="hljs-string">"text-1_1_1_1"</span>
                            },
                            {
                                <span class="hljs-string">"id"</span> :  <span class="hljs-string">"1_1_1_2"</span>,
                                <span class="hljs-string">"text"</span> :  <span class="hljs-string">"text-1_1_1_2"</span>
                            }
                        ]
                    },
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1_2"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1_2"</span>
                    }
                ]
            },
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2"</span>,
                <span class="hljs-string">"child"</span> : [
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2_1"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2_1"</span>
                    },
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2_2"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2_2"</span>
                    }
                ]
            }
        ]
    },
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"2"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2"</span>,
        <span class="hljs-string">"child"</span> : [
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"2_1"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2_1"</span>,
                <span class="hljs-string">"child"</span> : []
            },
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"2_2"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2_2"</span>,
                <span class="hljs-string">"child"</span> : []
            },
        ]
    },
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"3"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-3"</span>,
        <span class="hljs-string">"child"</span> : []
    }
]
</code></pre>
	</div>
</div>
<h3 id="-">示例数据源</h3>
<blockquote>
<p>此数据缺少两个主要key: <strong>id</strong> <strong>child</strong> , 需要进行key的转化绑定</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports) {

		"use strict";

		window.template_data_attr = [{
			"value": 1,
			"name": "name1",
			"node": [{
				"value": 11,
				"name": "name11",
				"node": [{
					"value": 111,
					"name": "name111",
					"node": []
				}, {
					"value": 112,
					"name": "name112",
					"node": []
				}]
			}]
		}, {
			"value": 2,
			"name": "name2",
			"node": [{
				"value": 21,
				"name": "name21",
				"node": []
			}]
		}, {
			"value": 3,
			"name": "name3",
			"node": []
		}];

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-built_in">window</span>.template_data_attr = [
    {
        <span class="hljs-string">"value"</span> : <span class="hljs-number">1</span>,
        <span class="hljs-string">"name"</span> : <span class="hljs-string">"name1"</span>,
        <span class="hljs-string">"node"</span> : [
            {
                <span class="hljs-string">"value"</span> : <span class="hljs-number">11</span>,
                <span class="hljs-string">"name"</span> : <span class="hljs-string">"name11"</span>,
                <span class="hljs-string">"node"</span> : [
                    {
                        <span class="hljs-string">"value"</span> : <span class="hljs-number">111</span>,
                        <span class="hljs-string">"name"</span> : <span class="hljs-string">"name111"</span>,
                        <span class="hljs-string">"node"</span> :  []
                    },
                    {
                        <span class="hljs-string">"value"</span> : <span class="hljs-number">112</span>,
                        <span class="hljs-string">"name"</span> : <span class="hljs-string">"name112"</span>,
                        <span class="hljs-string">"node"</span> :  []
                    }
                ]
            }
        ]
    },
    {
        <span class="hljs-string">"value"</span> : <span class="hljs-number">2</span>,
        <span class="hljs-string">"name"</span> : <span class="hljs-string">"name2"</span>,
        <span class="hljs-string">"node"</span> : [
            {
                <span class="hljs-string">"value"</span> : <span class="hljs-number">21</span>,
                <span class="hljs-string">"name"</span> : <span class="hljs-string">"name21"</span>,
                <span class="hljs-string">"node"</span> : []
            }
        ]
    },
    {
        <span class="hljs-string">"value"</span> : <span class="hljs-number">3</span>,
        <span class="hljs-string">"name"</span> : <span class="hljs-string">"name3"</span>,
        <span class="hljs-string">"node"</span> : []
    }
]
</code></pre>
	</div>
</div>
<h2 id="-">数据处理</h2>
<blockquote>
<h3 id="-api-"><strong>注 : 所有的方法或API调用都不会直接对数据源进行任何改变</strong></h3>
</blockquote>
<h3 id="1-treestore-treemap-data-childname-fn-parentarray-">1. TreeStore.treeMap(data,childName,fn, parentArray)</h3>
<blockquote>
<p>可以遍历所有数据, 在 <code>fn(item)</code> 需要 <code>return item</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
<th>return</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Object</td>
<td>数据源</td>
<td></td>
</tr>
<tr>
<td>childName</td>
<td>String</td>
<td>下一层数据的key的命名</td>
<td></td>
</tr>
<tr>
<td>fn</td>
<td>function(item)</td>
<td>回调函数</td>
<td></td>
</tr>
<tr>
<td>parentArray</td>
<td>Boolean</td>
<td>返回所有祖父元素(默认false)</td>
<td>Array</td>
</tr>
</tbody>
</table>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		console.group('TreeStore.treeMap');
		var data1 = TreeStore.treeMap(template_data_attr, 'node', function (item) {
			// 如果配置parentArray 则可以打印出此属性
			console.log('item.value : \n', item.value, ' item[\'__TreeStore_parentArray\'] : \n', item['__TreeStore_parentArray']);
			item.value = 'id' + item.value.toString();
			return item;
		}, true);
		console.log('data1 : \n', data1);
		console.groupEnd();
		/*	template_data_attr 数据中每个 value 转换成字符类型 并添加id前缀
	 [
	     {
	         "value": "id1",
	         "name": "name1",
	         "node": [
	             {
	                 "value": "id11",
	                 "name": "name11",
	                 "node": [
	                     {
	                         "value": "id111",
	                         "name": "name111",
	                         "node": []
	                     },
	                     {
	                         "value" : 'id112',
	                         "name" : "name112",
	                         "node" :  []
	                     }
	                 ]
	             }
	         ]
	     },
	     {
	         "value": "id2",
	         "name": "name2",
	         "node": [
	             {
	                 "value": "id21",
	                 "name": "name21",
	                 "node": []
	             }
	         ]
	     },
	     {
	         "value": "id3",
	         "name": "name3",
	         "node": []
	     }
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-built_in">console</span>.group(<span class="hljs-string">'TreeStore.treeMap'</span>)
<span class="hljs-keyword">var</span> data1 = TreeStore.treeMap( template_data_attr , <span class="hljs-string">'node'</span> , <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> item </span>) </span>{
    <span class="hljs-comment">// 如果配置parentArray 则可以打印出此属性</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'item.value : \n'</span>,item.value,<span class="hljs-string">' item[\'__TreeStore_parentArray\'] : \n'</span>,item[<span class="hljs-string">'__TreeStore_parentArray'</span>])
    item.value = <span class="hljs-string">'id'</span>+item.value.toString()
    <span class="hljs-keyword">return</span> item
} , <span class="hljs-literal">true</span> )
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'data1 : \n'</span>,data1)
<span class="hljs-built_in">console</span>.groupEnd()
<span class="hljs-comment">/*	template_data_attr 数据中每个 value 转换成字符类型 并添加id前缀
[
    {
        "value": "id1",
        "name": "name1",
        "node": [
            {
                "value": "id11",
                "name": "name11",
                "node": [
                    {
                        "value": "id111",
                        "name": "name111",
                        "node": []
                    },
                    {
                        "value" : 'id112',
                        "name" : "name112",
                        "node" :  []
                    }
                ]
            }
        ]
    },
    {
        "value": "id2",
        "name": "name2",
        "node": [
            {
                "value": "id21",
                "name": "name21",
                "node": []
            }
        ]
    },
    {
        "value": "id3",
        "name": "name3",
        "node": []
    }
]
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 :  有时候数据来源中 id/value 是 <strong>number</strong> 类型,而最终所需数据格式 id/value 应该为 <strong>String</strong>, 此时可以使用 treeMap() 遍历所有数据,自行回调处理</p>
</blockquote>
<h3 id="2-treestore-treefilter-data-childname-fn-">2. TreeStore.treeFilter(data,childName,fn)</h3>
<blockquote>
<p>遍历所有数据进行过滤, 在 <code>fn()</code> 需要 <code>return Boolean</code></p>
</blockquote>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Object</td>
<td>数据源</td>
</tr>
<tr>
<td>childName</td>
<td>String</td>
<td>下一层数据的key的命名</td>
</tr>
<tr>
<td>fn</td>
<td>Function</td>
<td>回调函数 ( ture 返回当前元素 ; false 不返回当前元素 )</td>
</tr>
</tbody>
</table>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var data2 = TreeStore.treeFilter(template_data_attr, 'node', function (item) {
			return !/2/g.test(item.value);
		});
		console.log('data2 : \n', data2);
		/*  template_data_attr 数据中每个 value 中匹配到`2`的都过滤掉
	 [
	     {
	         "value": 1,
	         "name": "name1",
	         "node": [
	             {
	                 "value": 11,
	                 "name": "name11",
	                 "node": [
	                     {
	                         "value": 111,
	                         "name": "name111",
	                         "node": []
	                     }
	                 ]
	             }
	         ]
	     },
	     {
	         "value": 3,
	         "name": "name3",
	         "node": []
	     }
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> data2 = TreeStore.treeFilter(template_data_attr,<span class="hljs-string">'node'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>)</span>{
    <span class="hljs-keyword">return</span> (!<span class="hljs-regexp">/2/g</span>.test(item.value))
})
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'data2 : \n'</span>,data2)
<span class="hljs-comment">/*  template_data_attr 数据中每个 value 中匹配到`2`的都过滤掉
[
    {
        "value": 1,
        "name": "name1",
        "node": [
            {
                "value": 11,
                "name": "name11",
                "node": [
                    {
                        "value": 111,
                        "name": "name111",
                        "node": []
                    }
                ]
            }
        ]
    },
    {
        "value": 3,
        "name": "name3",
        "node": []
    }
]
*/</span>
</code></pre>
	</div>
</div>
<h3 id="3-treestore-data-">3. TreeStore(data)</h3>
<blockquote>
<h4 id="-"><em>基础使用</em></h4>
<p>数据源 需要符合两个条件</p>
<ul>
<li>3.1 数据格式一致</li>
<li>3.2 三个主要<strong>key</strong>的命名一致: <strong>id</strong> <strong>child</strong></li>
</ul>
<h4 id="-"><em>返回一个实例</em></h4>
<ul>
<li>数据被存放在属性data中,请不要自行操作data</li>
</ul>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var data3 = TreeStore(template_data);

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> data3 = TreeStore(template_data)
</code></pre>
	</div>
</div>
<h3 id="4-treestore-data-setting-">4. TreeStore(data,setting)</h3>
<blockquote>
<h4 id="-"><em>数据的转化</em></h4>
</blockquote>
<pre><code><span class="hljs-type">TreeStore</span>(<span class="hljs-class"><span class="hljs-keyword">data</span>,{
    //模板数据 <span class="hljs-title">keyName</span> 对应 示例数据的 <span class="hljs-type">DemokeyName</span>
    <span class="hljs-title">keyName</span> :  <span class="hljs-type">DemokeyName</span>,
    <span class="hljs-title">keyName2</span> :  <span class="hljs-type">DemokeyName2</span> ,
    ...
})</span>
</code></pre><blockquote>
<p>倘若, 示例数据在 上述条件 只满足 3.1<br>那么, 将示例数据的 key 和模板数据的 key 做绑定</p>
<h5 id="-">注:不会直接对示例数据源进行操作</h5>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var data4 = TreeStore(template_data_attr, {
			//模板数据 id 对应 示例数据的 value
			id: 'value',
			//模板数据 child 对应 示例数据的 node
			child: 'node'
		});
		console.log("data4.data : \n", data4.data);
		/*	示例数据经过处理后
	 [
	     {
	         "id": 1,
	         "name": "name1",
	         "child": [
	             {
	                 "id": 11,
	                 "name": "name11",
	                 "child": [
	                     {
	                         "id": 111,
	                         "name": "name111",
	                         "child": []
	                     },
	                     {
	                         "id" : 112,
	                         "name" : "name112",
	                         "child" :  []
	                     }
	                 ]
	             }
	         ]
	     },
	     {
	         "id": 2,
	         "name": "name2",
	         "child": [
	             {
	                 "id": 21,
	                 "name": "name21",
	                 "child": []
	             }
	         ]
	     },
	     {
	         "id": 3,
	         "name": "name3",
	         "child": []
	     }
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> data4 = TreeStore(template_data_attr,{
    <span class="hljs-comment">//模板数据 id 对应 示例数据的 value</span>
    id :  <span class="hljs-string">'value'</span>,
    <span class="hljs-comment">//模板数据 child 对应 示例数据的 node</span>
    child :  <span class="hljs-string">'node'</span> ,
})
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"data4.data : \n"</span>,data4.data)
<span class="hljs-comment">/*	示例数据经过处理后
[
    {
        "id": 1,
        "name": "name1",
        "child": [
            {
                "id": 11,
                "name": "name11",
                "child": [
                    {
                        "id": 111,
                        "name": "name111",
                        "child": []
                    },
                    {
                        "id" : 112,
                        "name" : "name112",
                        "child" :  []
                    }
                ]
            }
        ]
    },
    {
        "id": 2,
        "name": "name2",
        "child": [
            {
                "id": 21,
                "name": "name21",
                "child": []
            }
        ]
    },
    {
        "id": 3,
        "name": "name3",
        "child": []
    }
]
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 项目数据已经成型,无法修改成模板标准数据时,添加第二个参数 将数据转化成标准数据</p>
</blockquote>
<h3 id="5-treestore-extendchild-data-id-childdata-">5. TreeStore.extendChild(data,id,childData)</h3>
<blockquote>
<p>将数组 <code>childData</code> 设置为某个 id 的 <code>child</code> 属性</p>
</blockquote>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Array</td>
<td>数据源</td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td>某个id</td>
</tr>
<tr>
<td>childData</td>
<td>Array</td>
<td>将设置为child的数据</td>
</tr>
</tbody>
</table>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var data5 = TreeStore.extendChild(template_data, '1_1_2', [{
			id: '1_1_2_1',
			text: 'text-1_1_2_1',
			child: [{
				id: '1_1_2_1_1',
				text: 'text-1_1_2_1_1'
			}, {
				id: '1_1_2_1_2',
				text: 'text-1_1_2_1_2'
			}]
		}, {
			id: '1_1_2_2',
			text: 'text-1_1_2_2'
		}]);
		console.log("data5 : \n", data5);
		/*
	 [
	     {
	         "id": "1",
	         "text": "text-1",
	         "child": [
	             {
	                 "id": "1_1",
	                 "text": "text-1_1",
	                 "child": [
	                     {
	                         "id": "1_1_1",
	                         "text": "text-1_1_1",
	                         "child": [
	                             {
	                                 "id": "1_1_1_1",
	                                 "text": "text-1_1_1_1"
	                             },
	                             {
	                                 "id": "1_1_1_2",
	                                 "text": "text-1_1_1_2"
	                             }
	                         ]
	                     },
	                     {
	                         "id": "1_1_2",
	                         "text": "text-1_1_2",
	                         "child": [
	                             {
	                                 "id": "1_1_2_1",
	                                 "text": "text-1_1_2_1"
	                             },
	                             {
	                                 "id": "1_1_2_2",
	                                 "text": "text-1_1_2_2"
	                             }
	                         ]
	                     }
	                 ]
	             },
	             {
	                 "id": "1_2",
	                 "text": "text-1_2",
	                 "child": [
	                     {
	                         "id": "1_2_1",
	                         "text": "text-1_2_1"
	                     },
	                     {
	                         "id": "1_2_2",
	                         "text": "text-1_2_2"
	                     }
	                 ]
	             }
	         ]
	     },
	     {
	         "id": "2",
	         "text": "text-2",
	         "child": [
	             {
	                 "id": "2_1",
	                 "text": "text-2_1",
	                 "child": []
	             },
	             {
	                 "id": "2_2",
	                 "text": "text-2_2",
	                 "child": []
	             }
	         ]
	     },
	     {
	         "id": "3",
	         "text": "text-3",
	         "child": []
	     }
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> data5 = TreeStore.extendChild(template_data,<span class="hljs-string">'1_1_2'</span>,[
    {
        <span class="hljs-attr">id</span>:<span class="hljs-string">'1_1_2_1'</span>,
        <span class="hljs-attr">text</span>:<span class="hljs-string">'text-1_1_2_1'</span>,
        <span class="hljs-attr">child</span>:[
            {
                <span class="hljs-attr">id</span>:<span class="hljs-string">'1_1_2_1_1'</span>,
                <span class="hljs-attr">text</span>:<span class="hljs-string">'text-1_1_2_1_1'</span>
            },{
                <span class="hljs-attr">id</span>:<span class="hljs-string">'1_1_2_1_2'</span>,
                <span class="hljs-attr">text</span>:<span class="hljs-string">'text-1_1_2_1_2'</span>
            }
        ]
    },
    {
        <span class="hljs-attr">id</span>:<span class="hljs-string">'1_1_2_2'</span>,
        <span class="hljs-attr">text</span>:<span class="hljs-string">'text-1_1_2_2'</span>
    }
])
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"data5 : \n"</span>,data5)
<span class="hljs-comment">/*
[
    {
        "id": "1",
        "text": "text-1",
        "child": [
            {
                "id": "1_1",
                "text": "text-1_1",
                "child": [
                    {
                        "id": "1_1_1",
                        "text": "text-1_1_1",
                        "child": [
                            {
                                "id": "1_1_1_1",
                                "text": "text-1_1_1_1"
                            },
                            {
                                "id": "1_1_1_2",
                                "text": "text-1_1_1_2"
                            }
                        ]
                    },
                    {
                        "id": "1_1_2",
                        "text": "text-1_1_2",
                        "child": [
                            {
                                "id": "1_1_2_1",
                                "text": "text-1_1_2_1"
                            },
                            {
                                "id": "1_1_2_2",
                                "text": "text-1_1_2_2"
                            }
                        ]
                    }
                ]
            },
            {
                "id": "1_2",
                "text": "text-1_2",
                "child": [
                    {
                        "id": "1_2_1",
                        "text": "text-1_2_1"
                    },
                    {
                        "id": "1_2_2",
                        "text": "text-1_2_2"
                    }
                ]
            }
        ]
    },
    {
        "id": "2",
        "text": "text-2",
        "child": [
            {
                "id": "2_1",
                "text": "text-2_1",
                "child": []
            },
            {
                "id": "2_2",
                "text": "text-2_2",
                "child": []
            }
        ]
    },
    {
        "id": "3",
        "text": "text-3",
        "child": []
    }
]
*/</span>
</code></pre>
	</div>
</div>
<h2 id="api">API</h2>
<blockquote>
<p>传入 id 如果是 number 也会被转换为string<br>事例 :  <a href="https://github.com/fast-flow/tree-store/tree/master/example">https://github.com/fast-flow/tree-store/tree/master/example</a></p>
</blockquote>
<h3 id="treestore-data-getchildids-string-array-">TreeStore(data).getChildIds(String/Array)</h3>
<blockquote>
<p>获取id下一层的所有子元素id</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo1 = TreeStore(template_data);
		console.log('demo1.getChildIds("2") : \n', demo1.getChildIds("2"));
		//	["2_1","2_2"]
		console.log('demo1.getChildIds(["1_2","2"]) : \n', demo1.getChildIds(["1_2", "2"]));
		/*
	 [
	     ["1_2_1","1_2_2"],
	     ["2_1","2_2"]
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo1 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'demo1.getChildIds("2") : \n'</span>,demo1.getChildIds(<span class="hljs-string">"2"</span>))
<span class="hljs-comment">//	["2_1","2_2"]</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'demo1.getChildIds(["1_2","2"]) : \n'</span>,demo1.getChildIds([<span class="hljs-string">"1_2"</span>,<span class="hljs-string">"2"</span>]))
<span class="hljs-comment">/*
[
    ["1_2_1","1_2_2"],
    ["2_1","2_2"]
]
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 操作第一级下拉框某一项时可以获取当前项的ID, 利用 <code>getChildIds()</code> 可快速找出下一层子元素id, 可以立即获取第二级下拉框需要元素, 配合 <code>getData()</code> 完成显示内容的渲染</p>
</blockquote>
<h3 id="treestore-data-getchildallids-string-array-null-">TreeStore(data).getChildAllIds(String/Array/null)</h3>
<blockquote>
<p>获取id下所有层级子孙元素 id</p>
<ul>
<li>有参数 id 时,当前 id 下所有层级的子孙元素 id</li>
<li>没有参数id时,返回所有 id 下所有层级的子孙元素 id , 返回类型 object</li>
</ul>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo2 = TreeStore(template_data);
		console.log("demo2.getChildAllIds('1') : \n", demo2.getChildAllIds('1'));
		//	["1_1","1_2","1_1_1","1_1_2","1_1_1_1","1_1_1_2","1_2_1","1_2_2"]
		console.log("demo2.getChildAllIds( [ '1_2' , '1_1_1' ] ) : \n", demo2.getChildAllIds(['1_2', '1_1_1']));
		/*
	 [
	     ["1_2_1","1_2_2"],
	     ["1_1_1_1","1_1_1_2"]
	 ]
	 */
		console.log("demo2.getChildAllIds( [ '1_2' , '1_1_1' ] ) : \n", demo2.getChildAllIds());
		/*
	 {
	 	"1":["1_1","1_2","1_1_1","1_1_2","1_1_1_1","1_1_1_2","1_2_1","1_2_2"],
	 	"2":["2_1","2_2"],
	 	"3":[],
	 	"1_1":["1_1_1","1_1_2","1_1_1_1","1_1_1_2"],
	 	"1_1_1":["1_1_1_1","1_1_1_2"],
	 	"1_1_2":[],
	 	"1_2":["1_2_1","1_2_2"],
	 	"2_1":[],
	 	"2_2":[]
	 }
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo2 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log( <span class="hljs-string">"demo2.getChildAllIds('1') : \n"</span>,demo2.getChildAllIds(<span class="hljs-string">'1'</span>) )
<span class="hljs-comment">//	["1_1","1_2","1_1_1","1_1_2","1_1_1_1","1_1_1_2","1_2_1","1_2_2"]</span>
<span class="hljs-built_in">console</span>.log( <span class="hljs-string">"demo2.getChildAllIds( [ '1_2' , '1_1_1' ] ) : \n"</span>,demo2.getChildAllIds( [ <span class="hljs-string">'1_2'</span> , <span class="hljs-string">'1_1_1'</span> ] ) )
<span class="hljs-comment">/*
[
    ["1_2_1","1_2_2"],
    ["1_1_1_1","1_1_1_2"]
]
*/</span>
<span class="hljs-built_in">console</span>.log( <span class="hljs-string">"demo2.getChildAllIds( [ '1_2' , '1_1_1' ] ) : \n"</span>,demo2.getChildAllIds() )
<span class="hljs-comment">/*
{
	"1":["1_1","1_2","1_1_1","1_1_2","1_1_1_1","1_1_1_2","1_2_1","1_2_2"],
	"2":["2_1","2_2"],
	"3":[],
	"1_1":["1_1_1","1_1_2","1_1_1_1","1_1_1_2"],
	"1_1_1":["1_1_1_1","1_1_1_2"],
	"1_1_2":[],
	"1_2":["1_2_1","1_2_2"],
	"2_1":[],
	"2_2":[]
}
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 操作某一项时可以获取当前项的ID, 利用 <code>getChildAllIds()</code> 可快速找出所有子孙元素id, 对这些子元素做全选或反选操作, 配合 <code>getData()</code> 完成显示内容的渲染</p>
</blockquote>
<h3 id="treestore-data-getdata-string-array-">TreeStore(data).getData(String/Array)</h3>
<blockquote>
<p>获取当前 id 的所有数据 , 包括TEXT,CHILD,...甚至ID本身</p>
<ul>
<li>参数单独一个id : getData(id)</li>
<li>参数多个id : getData([id1,id2,...])</li>
</ul>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo3 = TreeStore(template_data);
		console.log("demo3.getData('2') : \n", demo3.getData('2'));
		/*
	 {
	     "id": "2",
	     "text": "text-2",
	     "child": [
	         {
	             "id": "2_1",
	             "text": "text-2_1",
	             "child": []
	         },
	         {
	             "id": "2_2",
	             "text": "text-2_2",
	             "child": []
	         }
	     ]
	 }
	 */
		console.log("demo3.getData(['3','2']) : \n", demo3.getData(['3', '2']));
		/*
	 [
	     {
	         "id": "3",
	         "text": "text-3",
	         "child": []
	     },
	     {
	         "id": "2",
	         "text": "text-2",
	         "child": [
	             {
	                 "id": "2_1",
	                 "text": "text-2_1",
	                 "child": []
	             },
	             {
	                 "id": "2_2",
	                 "text": "text-2_2",
	                 "child": []
	             }
	         ]
	     }
	 ]
	 */
		console.info(JSON.stringify(demo3.getData()));
		/*
	 {
	     "1": {
	         "id": "1",
	         "text": "text-1",
	         "child": [
	             {
	                 "id": "1_1",
	                 "text": "text-1_1",
	                 "child": [
	                     {
	                         "id": "1_1_1",
	                         "text": "text-1_1_1",
	                         "child": [
	                             {
	                                 "id": "1_1_1_1",
	                                 "text": "text-1_1_1_1"
	                             }, {
	                                 "id": "1_1_1_2",
	                                 "text": "text-1_1_1_2"
	                             }
	                         ]
	                     }, {
	                         "id": "1_1_2",
	                         "text": "text-1_1_2",
	                         "child": [
	                             {
	                                 "id": "1_1_2_1",
	                                 "text": "text-1_1_2_1"
	                             }, {
	                                 "id": "1_1_2_2",
	                                 "text": "text-1_1_2_2"
	                             }
	                         ]
	                     }
	                 ]
	             }, {
	                 "id": "1_2",
	                 "text": "text-1_2",
	                 "child": [
	                     {
	                         "id": "1_2_1",
	                         "text": "text-1_2_1"
	                     }, {
	                         "id": "1_2_2",
	                         "text": "text-1_2_2"
	                     }
	                 ]
	             }
	         ]
	     },
	     "2": {
	         "id": "2",
	         "text": "text-2",
	         "child": [
	             {
	                 "id": "2_1",
	                 "text": "text-2_1",
	                 "child": []
	             }, {
	                 "id": "2_2",
	                 "text": "text-2_2",
	                 "child": []
	             }
	         ]
	     },
	     "3": {
	         "id": "3",
	         "text": "text-3",
	         "child": []
	     },
	     "1_1": {
	         "id": "1_1",
	         "text": "text-1_1",
	         "child": [
	             {
	                 "id": "1_1_1",
	                 "text": "text-1_1_1",
	                 "child": [
	                     {
	                         "id": "1_1_1_1",
	                         "text": "text-1_1_1_1"
	                     }, {
	                         "id": "1_1_1_2",
	                         "text": "text-1_1_1_2"
	                     }
	                 ]
	             }, {
	                 "id": "1_1_2",
	                 "text": "text-1_1_2",
	                 "child": [
	                     {
	                         "id": "1_1_2_1",
	                         "text": "text-1_1_2_1"
	                     }, {
	                         "id": "1_1_2_2",
	                         "text": "text-1_1_2_2"
	                     }
	                 ]
	             }
	         ]
	     },
	     "1_1_1": {
	         "id": "1_1_1",
	         "text": "text-1_1_1",
	         "child": [
	             {
	                 "id": "1_1_1_1",
	                 "text": "text-1_1_1_1"
	             }, {
	                 "id": "1_1_1_2",
	                 "text": "text-1_1_1_2"
	             }
	         ]
	     },
	     "1_1_1_1": {
	         "id": "1_1_1_1",
	         "text": "text-1_1_1_1"
	     },
	     "1_1_1_2": {
	         "id": "1_1_1_2",
	         "text": "text-1_1_1_2"
	     },
	     "1_1_2": {
	         "id": "1_1_2",
	         "text": "text-1_1_2",
	         "child": [
	             {
	                 "id": "1_1_2_1",
	                 "text": "text-1_1_2_1"
	             }, {
	                 "id": "1_1_2_2",
	                 "text": "text-1_1_2_2"
	             }
	         ]
	     },
	     "1_1_2_1": {
	         "id": "1_1_2_1",
	         "text": "text-1_1_2_1"
	     },
	     "1_1_2_2": {
	         "id": "1_1_2_2",
	         "text": "text-1_1_2_2"
	     },
	     "1_2": {
	         "id": "1_2",
	         "text": "text-1_2",
	         "child": [
	             {
	                 "id": "1_2_1",
	                 "text": "text-1_2_1"
	             }, {
	                 "id": "1_2_2",
	                 "text": "text-1_2_2"
	             }
	         ]
	     },
	     "1_2_1": {
	         "id": "1_2_1",
	         "text": "text-1_2_1"
	     },
	     "1_2_2": {
	         "id": "1_2_2",
	         "text": "text-1_2_2"
	     },
	     "2_1": {
	         "id": "2_1",
	         "text": "text-2_1",
	         "child": []
	     },
	     "2_2": {
	         "id": "2_2",
	         "text": "text-2_2",
	         "child": []
	     }
	 }
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo3 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo3.getData('2') : \n"</span>,demo3.getData(<span class="hljs-string">'2'</span>))
<span class="hljs-comment">/*
{
    "id": "2",
    "text": "text-2",
    "child": [
        {
            "id": "2_1",
            "text": "text-2_1",
            "child": []
        },
        {
            "id": "2_2",
            "text": "text-2_2",
            "child": []
        }
    ]
}
*/</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo3.getData(['3','2']) : \n"</span>,demo3.getData([<span class="hljs-string">'3'</span>,<span class="hljs-string">'2'</span>]))
<span class="hljs-comment">/*
[
    {
        "id": "3",
        "text": "text-3",
        "child": []
    },
    {
        "id": "2",
        "text": "text-2",
        "child": [
            {
                "id": "2_1",
                "text": "text-2_1",
                "child": []
            },
            {
                "id": "2_2",
                "text": "text-2_2",
                "child": []
            }
        ]
    }
]
*/</span>
<span class="hljs-built_in">console</span>.info(<span class="hljs-built_in">JSON</span>.stringify(demo3.getData()))
<span class="hljs-comment">/*
{
    "1": {
        "id": "1",
        "text": "text-1",
        "child": [
            {
                "id": "1_1",
                "text": "text-1_1",
                "child": [
                    {
                        "id": "1_1_1",
                        "text": "text-1_1_1",
                        "child": [
                            {
                                "id": "1_1_1_1",
                                "text": "text-1_1_1_1"
                            }, {
                                "id": "1_1_1_2",
                                "text": "text-1_1_1_2"
                            }
                        ]
                    }, {
                        "id": "1_1_2",
                        "text": "text-1_1_2",
                        "child": [
                            {
                                "id": "1_1_2_1",
                                "text": "text-1_1_2_1"
                            }, {
                                "id": "1_1_2_2",
                                "text": "text-1_1_2_2"
                            }
                        ]
                    }
                ]
            }, {
                "id": "1_2",
                "text": "text-1_2",
                "child": [
                    {
                        "id": "1_2_1",
                        "text": "text-1_2_1"
                    }, {
                        "id": "1_2_2",
                        "text": "text-1_2_2"
                    }
                ]
            }
        ]
    },
    "2": {
        "id": "2",
        "text": "text-2",
        "child": [
            {
                "id": "2_1",
                "text": "text-2_1",
                "child": []
            }, {
                "id": "2_2",
                "text": "text-2_2",
                "child": []
            }
        ]
    },
    "3": {
        "id": "3",
        "text": "text-3",
        "child": []
    },
    "1_1": {
        "id": "1_1",
        "text": "text-1_1",
        "child": [
            {
                "id": "1_1_1",
                "text": "text-1_1_1",
                "child": [
                    {
                        "id": "1_1_1_1",
                        "text": "text-1_1_1_1"
                    }, {
                        "id": "1_1_1_2",
                        "text": "text-1_1_1_2"
                    }
                ]
            }, {
                "id": "1_1_2",
                "text": "text-1_1_2",
                "child": [
                    {
                        "id": "1_1_2_1",
                        "text": "text-1_1_2_1"
                    }, {
                        "id": "1_1_2_2",
                        "text": "text-1_1_2_2"
                    }
                ]
            }
        ]
    },
    "1_1_1": {
        "id": "1_1_1",
        "text": "text-1_1_1",
        "child": [
            {
                "id": "1_1_1_1",
                "text": "text-1_1_1_1"
            }, {
                "id": "1_1_1_2",
                "text": "text-1_1_1_2"
            }
        ]
    },
    "1_1_1_1": {
        "id": "1_1_1_1",
        "text": "text-1_1_1_1"
    },
    "1_1_1_2": {
        "id": "1_1_1_2",
        "text": "text-1_1_1_2"
    },
    "1_1_2": {
        "id": "1_1_2",
        "text": "text-1_1_2",
        "child": [
            {
                "id": "1_1_2_1",
                "text": "text-1_1_2_1"
            }, {
                "id": "1_1_2_2",
                "text": "text-1_1_2_2"
            }
        ]
    },
    "1_1_2_1": {
        "id": "1_1_2_1",
        "text": "text-1_1_2_1"
    },
    "1_1_2_2": {
        "id": "1_1_2_2",
        "text": "text-1_1_2_2"
    },
    "1_2": {
        "id": "1_2",
        "text": "text-1_2",
        "child": [
            {
                "id": "1_2_1",
                "text": "text-1_2_1"
            }, {
                "id": "1_2_2",
                "text": "text-1_2_2"
            }
        ]
    },
    "1_2_1": {
        "id": "1_2_1",
        "text": "text-1_2_1"
    },
    "1_2_2": {
        "id": "1_2_2",
        "text": "text-1_2_2"
    },
    "2_1": {
        "id": "2_1",
        "text": "text-2_1",
        "child": []
    },
    "2_2": {
        "id": "2_2",
        "text": "text-2_2",
        "child": []
    }
}
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 获取某项/某些项的ID时,可以利用 <code>getData()</code> 得到当前ID的其他数据,前提是你有其他数据</p>
</blockquote>
<h3 id="treestore-data-getparentallids-string-array-">TreeStore(data).getParentAllIds(String/Array)</h3>
<blockquote>
<p>获取当前id的所有祖父元素id<br>Tip : 获取当前id的第一个最近父元素id,可以试试 <code>getParentAllIds(id)[0]</code></p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo4 = TreeStore(template_data);
		console.log("demo4.getParentAllIds('1_1_2') : \n", demo4.getParentAllIds('1_1_2'));
		// ["1_1","1"]
		console.log("demo4.getParentAllIds( [ '1_1_1_1' , '2_1' ] ) : \n", demo4.getParentAllIds(['1_1_1_1', '2_1']));
		/*
	 [
	     ["1_1_1","1_1","1"],
	     ["2"]
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo4 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo4.getParentAllIds('1_1_2') : \n"</span>,demo4.getParentAllIds(<span class="hljs-string">'1_1_2'</span>))
<span class="hljs-comment">// ["1_1","1"]</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo4.getParentAllIds( [ '1_1_1_1' , '2_1' ] ) : \n"</span>,demo4.getParentAllIds( [ <span class="hljs-string">'1_1_1_1'</span> , <span class="hljs-string">'2_1'</span> ] ) )
<span class="hljs-comment">/*
[
    ["1_1_1","1_1","1"],
    ["2"]
]
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 对某一列某一项进行操作时, 可以获取当前项的ID, 此列有选择/全反选时, 利用 <code>getParentAllIds()</code> 可以快速获取所有祖父元素, 进行相应关联状态的改变</p>
</blockquote>
<h3 id="treestore-data-getchildleftbranchids-string-null-">TreeStore(data).getChildLeftBranchIds(String/null)</h3>
<blockquote>
<p>获取当前id的所有第一层子元素及首个子孙元素(即 此id的子元素 并 取左叉树的子元素id为新的id 取其子元素 以此类推)</p>
<ul>
<li>没有参数id时,所有元素及首个子孙元素</li>
</ul>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo6 = TreeStore(template_data);
		console.log("demo6.getChildLeftBranchIds('1_1') : \n", demo6.getChildLeftBranchIds('1_1'));
		/*
	 [
	     ["1_1_1","1_1_2"],
	     ["1_1_1_1","1_1_1_2"]
	 ]
	 */
		console.log("demo6.getChildLeftBranchIds() : \n", demo6.getChildLeftBranchIds());
		/*
	 [
	     ["1","2","3"],
	     ["1_1","1_2"],
	     ["1_1_1","1_1_2"],
	     ["1_1_1_1","1_1_1_2"]
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo6 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo6.getChildLeftBranchIds('1_1') : \n"</span>,demo6.getChildLeftBranchIds(<span class="hljs-string">'1_1'</span>))
<span class="hljs-comment">/*
[
    ["1_1_1","1_1_2"],
    ["1_1_1_1","1_1_1_2"]
]
*/</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo6.getChildLeftBranchIds() : \n"</span>,demo6.getChildLeftBranchIds())
<span class="hljs-comment">/*
[
    ["1","2","3"],
    ["1_1","1_2"],
    ["1_1_1","1_1_2"],
    ["1_1_1_1","1_1_1_2"]
]
*/</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 在级联下拉框中, 操作某一项时可以获取当前项的ID, 利用 <code>getChildLeftBranchIds()</code> 方法可以快速获取后几级下拉框的默认渲染选项, 防止在无值时下拉框都是空白现象</p>
</blockquote>
<h3 id="treestore-data-getsiblingids-string-null-">TreeStore(data).getSiblingIds(String/null)</h3>
<blockquote>
<p>获取当前id的所有兄弟元素id(包括当前id本身)</p>
<ul>
<li>没有参数id时,默认取数据的第一层所有id(多此一举,不建议调用此API传空值)</li>
<li>传入数组时,如遇id是空字符串,则直接返回空数组</li>
</ul>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo7 = TreeStore(template_data);
		console.log("demo7.getSiblingIds('1_1') : \n", demo7.getSiblingIds('1_1'));
		// ["1_1","1_2"]
		console.log("demo7.getSiblingIds() : \n", demo7.getSiblingIds());
		// ["1", "2", "3"]

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo7 = TreeStore(template_data)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo7.getSiblingIds('1_1') : \n"</span>,demo7.getSiblingIds(<span class="hljs-string">'1_1'</span>))
<span class="hljs-comment">// ["1_1","1_2"]</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo7.getSiblingIds() : \n"</span>,demo7.getSiblingIds())
<span class="hljs-comment">// ["1", "2", "3"]</span>
</code></pre>
	</div>
</div>
<blockquote>
<p>使用场景 : 在下拉框中, 有默认值时, 利用 <code>getSiblingIds()</code> 方法可以快速渲染出对应下拉框选项</p>
</blockquote>
<h2 id="api-">API--之树形业务</h2>
<blockquote>
<p>为什么将下面两个API独立出来?<br>因为它是对已有的API进行再次封装,使树形业务场景中的数据操作更简便</p>
</blockquote>
<h3 id="-">示例数据--之树形业务</h3>
<blockquote>
<p>相比之 模板数据 , 示例数据 添加了一个checked属性, 但不要求你的数据源必须有此属性</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports) {

		"use strict";

		window.template_data_tree = [{
			"id": "1",
			"text": "text-1",
			"child": [{
				"id": "1_1",
				"text": "text-1_1",
				"checked": true,
				"child": [{
					"id": "1_1_1",
					"text": "text-1_1_1",
					"checked": true,
					"child": [{
						"id": "1_1_1_1",
						"text": "text-1_1_1_1",
						"checked": true
					}, {
						"id": "1_1_1_2",
						"text": "text-1_1_1_2",
						"checked": true
					}]
				}, {
					"id": "1_1_2",
					"text": "text-1_1_2"
				}]
			}, {
				"id": "1_2",
				"text": "text-1_2",
				"child": [{
					"id": "1_2_1",
					"text": "text-1_2_1"
				}, {
					"id": "1_2_2",
					"text": "text-1_2_2"
				}]
			}]
		}, {
			"id": "2",
			"text": "text-2",
			"child": [{
				"id": "2_1",
				"text": "text-2_1",
				"checked": true,
				"child": []
			}, {
				"id": "2_2",
				"text": "text-2_2",
				"child": []
			}]
		}, {
			"id": "3",
			"text": "text-3",
			"child": []
		}];

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-built_in">window</span>.template_data_tree  =  [
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1"</span>,
        <span class="hljs-string">"child"</span> : [
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1"</span>,
                <span class="hljs-string">"checked"</span>:<span class="hljs-literal">true</span>,
                <span class="hljs-string">"child"</span> : [
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1_1"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1_1"</span>,
                        <span class="hljs-string">"checked"</span>:<span class="hljs-literal">true</span>,
                        <span class="hljs-string">"child"</span> :  [
                            {
                                <span class="hljs-string">"id"</span> :  <span class="hljs-string">"1_1_1_1"</span>,
                                <span class="hljs-string">"text"</span> :  <span class="hljs-string">"text-1_1_1_1"</span>,
                                <span class="hljs-string">"checked"</span>:<span class="hljs-literal">true</span>,
                            },
                            {
                                <span class="hljs-string">"id"</span> :  <span class="hljs-string">"1_1_1_2"</span>,
                                <span class="hljs-string">"text"</span> :  <span class="hljs-string">"text-1_1_1_2"</span>,
                                <span class="hljs-string">"checked"</span>:<span class="hljs-literal">true</span>,
                            }
                        ]
                    },
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_1_2"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_1_2"</span>
                    }
                ]
            },
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2"</span>,
                <span class="hljs-string">"child"</span> : [
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2_1"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2_1"</span>
                    },
                    {
                        <span class="hljs-string">"id"</span> : <span class="hljs-string">"1_2_2"</span>,
                        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-1_2_2"</span>
                    }
                ]
            }
        ]
    },
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"2"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2"</span>,
        <span class="hljs-string">"child"</span> : [
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"2_1"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2_1"</span>,
                <span class="hljs-string">"checked"</span>:<span class="hljs-literal">true</span>,
                <span class="hljs-string">"child"</span> : []
            },
            {
                <span class="hljs-string">"id"</span> : <span class="hljs-string">"2_2"</span>,
                <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-2_2"</span>,
                <span class="hljs-string">"child"</span> : []
            },
        ]
    },
    {
        <span class="hljs-string">"id"</span> : <span class="hljs-string">"3"</span>,
        <span class="hljs-string">"text"</span> : <span class="hljs-string">"text-3"</span>,
        <span class="hljs-string">"child"</span> : []
    }
]
</code></pre>
	</div>
</div>
<h3 id="treestore-data-getchecked-">TreeStore(data).getChecked()</h3>
<blockquote>
<p>找出数据源中所有checked属性为true的id并返回<br>此API使用前提 : 数据中有checked属性  !!Q:(欲有isChecked初始值首次获取checkIds)</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		"use strict";

		var TreeStore = __webpack_require__(1);
		var demo8 = TreeStore(template_data_tree).getChecked();
		console.log("demo8 : \n", demo8);
		// ["1_1","1_1_1","1_1_1_1","1_1_1_2","2_1"]

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo8 = TreeStore(template_data_tree).getChecked()
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo8 : \n"</span>,demo8)
<span class="hljs-comment">// ["1_1","1_1_1","1_1_1_1","1_1_1_2","2_1"]</span>
</code></pre>
	</div>
</div>
<h3 id="treestore-data-changechecked-object-">TreeStore(data).changeChecked(Object)</h3>
<blockquote>
<p>改变任一id的选中状态,可以返回计算后的所有选中id</p>
</blockquote>
<pre><code><span class="hljs-selector-tag">treeStore</span>( data )<span class="hljs-selector-class">.changeChecked</span>( {
    <span class="hljs-attribute">id </span>: id,
    <span class="hljs-attribute">isChecked </span>: Boolean ,
    <span class="hljs-attribute">checkedIds </span>: [ id1 , id2 , ... ] ,
    <span class="hljs-attribute">autoLink </span>: {
        <span class="hljs-attribute">parent </span>: true,
        <span class="hljs-attribute">child </span>: true
    }
} )
</code></pre><table>
<thead>
<tr>
<th>name</th>
<th>default</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td></td>
<td>String</td>
<td>当前操作的id</td>
</tr>
<tr>
<td>isChecked</td>
<td></td>
<td>Boolean</td>
<td>当前操作id的是否选中状态(change前一刻状态)</td>
</tr>
<tr>
<td>checkedIds</td>
<td></td>
<td>Array</td>
<td>当前已选中的所有ID</td>
</tr>
<tr>
<td>autoLink</td>
<td>true</td>
<td>Object</td>
<td>是否自动关联延伸到祖父元素和子孙元素 , 默认都关联</td>
</tr>
</tbody>
</table>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo9 = TreeStore(template_data_tree).changeChecked({
			id: '1_1_1',
			isChecked: true,
			checkedIds: ['1', '1_1', '1_1_1', '1_1_1_1', '2', '2_1', '2_2'],
			autoLink: {
				parent: false,
				child: false
			}
		});
		console.log("demo9 : \n", demo9);
		/*
	 {
	     "change":{
	         "unchecked_ids":["1_1_1"],
	         "checked_ids":[]
	     },
	     "checked":["1" , "1_1" , "1_1_1_1" , "2" , "2_1" , "2_2"]
	 }
	 */
		var demo10 = TreeStore(template_data_tree).changeChecked({
			id: '1_1_1',
			isChecked: false,
			checkedIds: ['1', '1_1', '1_1_1', '1_1_1_1', '2', '2_1', '2_2']
		});
		console.log("demo10 : \n", demo10);
		/*
	 {
	     "change":{
	         "unchecked_ids":[],
	         "checked_ids":["1","1_1","1_1_1","1_1_1_1","1_1_1_2"]
	     },
	     "checked":["1","1_1","1_1_1","1_1_1_1","1_1_1_2","2","2_1","2_2"]
	 }
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo9 = TreeStore(template_data_tree).changeChecked({
    <span class="hljs-attr">id</span> : <span class="hljs-string">'1_1_1'</span>,
    <span class="hljs-attr">isChecked</span> : <span class="hljs-literal">true</span>,
    <span class="hljs-attr">checkedIds</span> : [ <span class="hljs-string">'1'</span> , <span class="hljs-string">'1_1'</span> , <span class="hljs-string">'1_1_1'</span> , <span class="hljs-string">'1_1_1_1'</span> , <span class="hljs-string">'2'</span> , <span class="hljs-string">'2_1'</span> , <span class="hljs-string">'2_2'</span> ],
    <span class="hljs-attr">autoLink</span> : {
        <span class="hljs-attr">parent</span> : <span class="hljs-literal">false</span>,
        <span class="hljs-attr">child</span> : <span class="hljs-literal">false</span>
    }
})
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo9 : \n"</span>,demo9)
<span class="hljs-comment">/*
{
    "change":{
        "unchecked_ids":["1_1_1"],
        "checked_ids":[]
    },
    "checked":["1" , "1_1" , "1_1_1_1" , "2" , "2_1" , "2_2"]
}
*/</span>
<span class="hljs-keyword">var</span> demo10 = TreeStore(template_data_tree).changeChecked({
    <span class="hljs-attr">id</span> : <span class="hljs-string">'1_1_1'</span>,
    <span class="hljs-attr">isChecked</span> : <span class="hljs-literal">false</span>,
    <span class="hljs-attr">checkedIds</span> : [ <span class="hljs-string">'1'</span> , <span class="hljs-string">'1_1'</span> , <span class="hljs-string">'1_1_1'</span> , <span class="hljs-string">'1_1_1_1'</span> , <span class="hljs-string">'2'</span> , <span class="hljs-string">'2_1'</span> , <span class="hljs-string">'2_2'</span> ]
})
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo10 : \n"</span>,demo10)
<span class="hljs-comment">/*
{
    "change":{
        "unchecked_ids":[],
        "checked_ids":["1","1_1","1_1_1","1_1_1_1","1_1_1_2"]
    },
    "checked":["1","1_1","1_1_1","1_1_1_1","1_1_1_2","2","2_1","2_2"]
}
*/</span>
</code></pre>
	</div>
</div>
<h2 id="api-">API--之级联下拉框</h2>
<blockquote>
<p>为什么将以下API独立出来?<br>因为它是对已有的API进行再次封装,使在级联下拉框业务场景中的数据操作更简便</p>
</blockquote>
<h3 id="treestore-data-changeselect-string-">TreeStore(data).changeSelect(String)</h3>
<blockquote>
<p>根据传入的 id ,返回正确的选中id数组</p>
</blockquote>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var TreeStore = __webpack_require__(1);
		var demo11 = TreeStore(template_data).changeSelect('1_2');
		console.log("demo11 : \n", demo11);
		// ["1", "1_2", "1_2_1"]

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === 'undefined' ? 'undefined' : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo11 = TreeStore(template_data).changeSelect(<span class="hljs-string">'1_2'</span>)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo11 : \n"</span>,demo11)
<span class="hljs-comment">// ["1", "1_2", "1_2_1"]</span>
</code></pre>
	</div>
</div>
<h3 id="treestore-data-renderselect-object-">TreeStore(data).renderSelect(Object)</h3>
<blockquote>
<p>返回当前所有下拉框渲染的数据</p>
</blockquote>
<pre><code><span class="hljs-selector-tag">TreeStore</span>( <span class="hljs-selector-tag">data</span> )<span class="hljs-selector-class">.renderSelect</span>( {
    <span class="hljs-attribute">maxLength </span>: Number,
    checked : [ id1 , id2 , ... ] ,
} )
</code></pre><table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>maxLength</td>
<td>Number</td>
<td>返回结果数组的最长长度(即 渲染的下拉框最多个数) , 此参数可省略</td>
</tr>
<tr>
<td>checked</td>
<td>Array</td>
<td>已选中的id ( 传入数组长度,需要与渲染的级联下拉框个数相同,没有默认值id时,请传空字符串,保证数组长度 )</td>
</tr>
</tbody>
</table>
<div class="markrun markrun--js" >
	<div class="markrun-code" >
		<script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	"use strict";

	var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	/******/(function (modules) {
		// webpackBootstrap
		/******/ // The module cache
		/******/var installedModules = {};

		/******/ // The require function
		/******/function __webpack_require__(moduleId) {

			/******/ // Check if module is in cache
			/******/if (installedModules[moduleId])
				/******/return installedModules[moduleId].exports;

			/******/ // Create a new module (and put it into the cache)
			/******/var module = installedModules[moduleId] = {
				/******/exports: {},
				/******/id: moduleId,
				/******/loaded: false
				/******/ };

			/******/ // Execute the module function
			/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

			/******/ // Flag the module as loaded
			/******/module.loaded = true;

			/******/ // Return the exports of the module
			/******/return module.exports;
			/******/
		}

		/******/ // expose the modules object (__webpack_modules__)
		/******/__webpack_require__.m = modules;

		/******/ // expose the module cache
		/******/__webpack_require__.c = installedModules;

		/******/ // __webpack_public_path__
		/******/__webpack_require__.p = "";

		/******/ // Load entry module and return exports
		/******/return __webpack_require__(0);
		/******/
	})(
	/************************************************************************/
	/******/[
	/* 0 */
	/***/function (module, exports, __webpack_require__) {

		"use strict";

		var TreeStore = __webpack_require__(1);
		var demo12 = TreeStore(template_data).renderSelect({
			checked: ["1", "1_2", "1_2_1"]
		});
		console.log("demo12 : \n", demo12);
		/*
	 [
	         [
	                 {
	                     "id" : "1",
	                     "text" : "text-1",
	                     "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
	                 },
	                 {
	                     "id" : "2",
	                     "text" : "text-2",
	                     "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
	                 },
	                 {
	                     "id" : "3",
	                     "text" : "text-3",
	                     "child" : []
	                 }
	         ],
	                 [
	                 {
	                     "id" : "1_1",
	                     "text" : "text-1_1",
	                     "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
	                 },
	                 {
	                     "id" : "1_2",
	                     "text" : "text-1_2",
	                     "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
	                 }
	         ],
	         [
	                 {
	                     "id" : "1_2_1",
	                     "text" : "text-1_2_1"
	                 },
	                 {
	                     "id" : "1_2_2",
	                     "text" : "text-1_2_2"
	                 }
	         ]
	 ]
	 */

		/***/
	},
	/* 1 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		// export default require('./lib/index')

		module.exports = __webpack_require__(2);

		/***/
	},
	/* 2 */
	/***/function (module, exports, __webpack_require__) {

		'use strict';

		var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
			return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		} : function (obj) {
			return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
		};

		var _createClass = function () {
			function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
					var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
			}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
			};
		}();

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
			}
		}

		var extend = __webpack_require__(3);

		var __TreeStore = function () {
			function __TreeStore(props) {
				_classCallCheck(this, __TreeStore);

				this.data = props.data;
				this.uniquenessIdTest(); //检测id唯一性
			}
			//检测id唯一性


			_createClass(__TreeStore, [{
				key: 'uniquenessIdTest',
				value: function uniquenessIdTest() {
					var data = this.data;
					var rel_only_id = {};(function testOnlyId(data) {
						data.forEach(function (item) {
							if (typeof rel_only_id[item.id] != 'undefined') {
								console.warn('id => ' + item.id + '重复');
							}
							rel_only_id[item.id] = true;
							if (Array.isArray(item.child)) {
								testOnlyId(item.child);
							}
						});
					})(data);
				}
				//转化数字

			}, {
				key: 'idTestString',
				value: function idTestString(id) {
					if (typeof id == 'number') {
						console.warn(id + ' is number , its should be set to string');
						id = id.toString();
					}
					return id;
				}
				//关系表 - 数据信息

			}, {
				key: 'dataInfo',
				value: function dataInfo() {
					var data = this.data;
					var rel_dataInfo = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							rel_dataInfo[item.id] = item;
							if (Array.isArray(item.child)) {
								getKeyValue(item.child);
							}
						});
					})(data);

					return rel_dataInfo;
				}
				//关系表 - 子元素id表

			}, {
				key: 'childIds',
				value: function childIds() {
					var data = this.data;
					var rel_childIds = {};(function getKeyValue(data) {
						data.forEach(function (item) {
							var childIds_list = [];
							if (Array.isArray(item.child)) {
								item.child.forEach(function (itemSub) {
									childIds_list.push(itemSub.id);
									if (Array.isArray(itemSub.child)) {
										getKeyValue(item.child);
									} else {
										rel_childIds[itemSub.id] = [];
									}
								});
							}
							rel_childIds[item.id] = childIds_list;
						});
					})(data);

					return rel_childIds;
				}
				//关系表 - 子孙元素id表

			}, {
				key: 'childAllIds',
				value: function childAllIds() {
					var data = this.data;
					var rel_childIds = this.childIds();
					var rel_childAllIds = extend(true, {}, this.childIds()); //深复制 子元素关系表

					//得到 所有子孙元素表

					var _loop = function _loop(_index) {
						_index = _index.toString();
						var tempdata = rel_childAllIds[_index];(function allChildIds(tempdata) {
							tempdata.forEach(function (item) {
								if (Array.isArray(rel_childIds[item])) {
									rel_childAllIds[_index] = rel_childAllIds[_index].concat(rel_childIds[item]);
									allChildIds(rel_childIds[item]);
								}
							});
						})(tempdata);
						index = _index;
					};

					for (var index in rel_childAllIds) {
						_loop(index);
					}

					return rel_childAllIds;
				}
				//关系表 - 父元素id表

			}, {
				key: 'parentIds',
				value: function parentIds() {
					var rel_parentIds = {};
					var rel_childIds = this.childIds();

					var _loop2 = function _loop2(parent_id) {
						rel_childIds[parent_id].forEach(function (item) {
							rel_parentIds[item] = parent_id;
						});
					};

					for (var parent_id in rel_childIds) {
						_loop2(parent_id);
					}

					return rel_parentIds;
				}
				//关系表 - 所有祖父元素id

			}, {
				key: 'parentAllIds',
				value: function parentAllIds() {
					var rel_parentAllIds = {};
					var rel_parentIds = this.parentIds();

					var _loop3 = function _loop3(_sub) {
						_sub = _sub.toString();
						var parentIds_list = [];
						parentIds_list.push(rel_parentIds[_sub]);
						var parent_id = rel_parentIds[_sub];(function getAllParents(parent_id) {
							if (typeof rel_parentIds[parent_id] != 'undefined') {
								parentIds_list.push(rel_parentIds[parent_id]);
								var grandfather_id = rel_parentIds[parent_id];
								getAllParents(grandfather_id);
							}
						})(parent_id);
						rel_parentAllIds[_sub] = parentIds_list;
						sub = _sub;
					};

					for (var sub in rel_parentIds) {
						_loop3(sub);
					}

					return rel_parentAllIds;
				}
				//关系表 - 每个id的所有左树杈子孙元素id

			}, {
				key: 'childLeftBranchIds',
				value: function childLeftBranchIds() {
					var rel_childLeftBranchIds = {};
					var rel_childIds = this.childIds();

					var _loop4 = function _loop4(key) {
						rel_childLeftBranchIds[key] = [];
						if (rel_childIds[key].length > 0) {
							rel_childLeftBranchIds[key].push(rel_childIds[key]);
							var subkey = rel_childIds[key][0];(function firstChildIds(subkey) {
								if (typeof rel_childIds[subkey] != 'undefined') {
									if (rel_childIds[subkey].length > 0) {
										rel_childLeftBranchIds[key].push(rel_childIds[subkey]);
										var grandkey = rel_childIds[subkey][0];
										firstChildIds(grandkey);
									}
								}
							})(subkey);
						}
					};

					for (var key in rel_childIds) {
						_loop4(key);
					}

					return rel_childLeftBranchIds;
				}
			}]);

			return __TreeStore;
		}();
		//获取当前id所在item所有数据


		__TreeStore.prototype.getData = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return this.dataInfo();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.dataInfo()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.dataInfo()[id];
		};
		//获取子元素ids
		__TreeStore.prototype.getChildIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childIds()[id];
		};
		//获取子孙元素ids
		__TreeStore.prototype.getChildAllIds = function (id) {
			if (typeof id == 'undefined') {
				return this.childAllIds();
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					result.push(this.childAllIds()[id[i]]);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);

			return this.childAllIds()[id];
		};
		//获取所有祖父ids
		__TreeStore.prototype.getParentAllIds = function (id) {
			if (typeof id == 'undefined') {
				console.warn('id must not be null');
				return false;
			}
			//传入数组
			if (Array.isArray(id)) {
				var result = [];
				for (var i in id) {
					id[i] = this.idTestString(id[i]);
					var list = this.parentAllIds()[id[i]] || [];
					result.push(list);
				}
				return result;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.parentAllIds()[id] || [];
		};
		//所有左树杈ids
		__TreeStore.prototype.getChildLeftBranchIds = function (id) {
			var _this = this;

			id = id || '';
			if (!/\S/.test(id)) {
				var _ret5 = function () {
					var ids = [[]];
					_this.data.forEach(function (item) {
						ids[0].push(item.id);
					});
					if (_this.data.length > 0) {
						return {
							v: ids.concat(_this.childLeftBranchIds()[_this.data[0].id])
						};
					} else {
						return {
							v: ids
						};
					}
				}();

				if ((typeof _ret5 === 'undefined' ? 'undefined' : _typeof(_ret5)) === "object") return _ret5.v;
			}
			//检测是否数字类型并转化
			id = this.idTestString(id);
			return this.childLeftBranchIds()[id];
		};
		//获取兄弟元素ids
		__TreeStore.prototype.getSiblingIds = function (id) {
			var _this2 = this;

			var self = this;
			id = id || '';
			if (!/\S/.test(id) || typeof self.parentIds()[id] == 'undefined') {
				var _ret6 = function () {
					var list = [];
					_this2.data.forEach(function (item) {
						list.push(item.id);
					});
					return {
						v: list
					};
				}();

				if ((typeof _ret6 === 'undefined' ? 'undefined' : _typeof(_ret6)) === "object") return _ret6.v;
			}
			//检测是否数字类型并转化
			id = self.idTestString(id);
			return self.childIds()[self.parentIds()[id]];
		};
		//获取下拉框正确的选中id
		__TreeStore.prototype.changeSelect = function (id) {
			var self = this;
			//检测是否数字类型并转化
			id = id || '';
			id = self.idTestString(id);
			var list = self.parentAllIds()[id] || [];
			list = list.reverse();
			list.push(id);
			var childList = self.childLeftBranchIds()[id] || [[]];
			childList.forEach(function (item) {
				list.push(item[0]);
			});
			return list;
		};
		//渲染级联下拉框
		__TreeStore.prototype.renderSelect = function (settings) {
			var self = this;
			//检测checkIds必须为数组
			if (!Array.isArray(settings.checked)) {
				console.warn(settings.checked + 'must not be Array');
				return settings.checked;
			}
			//深复制checkIds
			var ids = extend(true, [], settings.checked);
			//遍历生成renderList
			var ids_list = [];
			ids.forEach(function (item, index) {
				item = self.idTestString(item);
				var sibling_ids = self.getSiblingIds(item) || [];
				var sibling_list = [];
				sibling_ids.forEach(function (sib_item) {
					sibling_list.push(self.dataInfo()[sib_item]);
				});
				ids_list.push(sibling_list);
			});
			//数据层数和级数不匹配时
			if (typeof settings.maxLength != 'undefined') {
				ids_list = ids_list.slice(0, settings.maxLength);
			}

			return ids_list;
		};
		//获取所有checked:true的id
		__TreeStore.prototype.getChecked = function () {
			var ids = [];
			var rel_data_info = this.dataInfo();
			for (var i in rel_data_info) {
				if (rel_data_info[i].checked == true) {
					ids.push(rel_data_info[i].id);
				}
			}
			return ids;
		};
		//改变选中状态
		__TreeStore.prototype.changeChecked = function (settings) {
			var _this3 = this;

			var self = this;
			// 参数数据
			var data = this.data;
			var id = settings.id;
			var isChecked = settings.isChecked;
			var checkedIds = settings.checkedIds;
			var autoLink = settings.autoLink || {};
			autoLink.parent = typeof autoLink.parent == 'boolean' ? autoLink.parent : true;
			autoLink.child = typeof autoLink.child == 'boolean' ? autoLink.child : true;

			// 需要返回的数据
			var result = {
				change: {
					unchecked_ids: [], //取消选中ids
					checked_ids: [] //选中ids
				},
				checked: []
			};

			//更新取消选中unchecked_ids并去除checked存在项
			if (isChecked) {
				(function () {
					var temp_ids = [];

					// 判断是否关联子孙
					temp_ids = autoLink.child ? temp_ids.concat(_this3.childAllIds()[id]) : [];

					temp_ids.push(id);

					// 判断是否关联祖父
					if (autoLink.parent) {
						//递归遍历所有需要去除的祖父ids
						;(function testParentChecked(id) {
							//找出除自己以外的兄弟ids
							var sibling_ids = [];
							var temp_sibling_ids = self.childIds()[self.parentIds()[id]] || [];
							var sibling_unchecked = temp_sibling_ids.length > 0 ? true : false; //判断兄弟ids是否是都取消状态
							// alert(temp_sibling_ids.length)
							if (temp_sibling_ids.length > 0) {
								//有兄弟ids
								temp_sibling_ids.forEach(function (item) {
									if (item != id) {
										sibling_ids.push(item);
									}
								});
								//判断兄弟ids是否是都取消状态
								checkedIds.forEach(function (item) {
									sibling_ids.forEach(function (sib_item) {
										if (item == sib_item) {
											sibling_unchecked = false;
										}
									});
								});
							}
							//兄弟ids都取消,则父元素取消
							if (sibling_unchecked) {
								var parent_id = self.parentIds()[id];
								temp_ids.push(parent_id);
								testParentChecked(parent_id);
							}
						})(id);
					}

					result.change.unchecked_ids = temp_ids;

					//去除checked存在项
					checkedIds.forEach(function (item) {
						var unexist = true;
						temp_ids.forEach(function (sib_item) {
							if (item == sib_item) {
								unexist = false;
							}
						});
						if (unexist) {
							result.checked.push(item);
						}
					});

					//添加选中checked_ids并去重checked
				})();
			} else {
				var _temp_ids = [];

				// 判断是否关联子孙
				_temp_ids = autoLink.child ? _temp_ids.concat(this.childAllIds()[id]) : [];

				_temp_ids.push(id);

				// 判断是否关联祖父
				_temp_ids = autoLink.parent ? _temp_ids.concat(this.parentAllIds()[id]).sort() : _temp_ids;

				var temp_checked_ids = extend(true, [], checkedIds);
				temp_checked_ids = temp_checked_ids.concat(_temp_ids).sort();

				result.checked = __webpack_require__(4)(temp_checked_ids);

				result.change.checked_ids = _temp_ids;
			}
			return result;
		};

		function TreeStore(data, settings) {
			settings = settings || false;

			//深复制数据源
			var temp_data = extend(true, [], data);

			//数据key转换
			if (settings !== false) {
				var childName = settings.child || 'child';
				temp_data = TreeStore.treeMap(temp_data, childName, function (item) {
					for (var key in settings) {
						item[key] = item[settings[key]];
						delete item[settings[key]];
					}
					return item;
				});
			}

			settings = {
				data: temp_data //深复制数据源
			};

			return new __TreeStore(settings);
		}

		//拓展数据
		TreeStore.extendChild = function (data, id, childData) {

			if (!Array.isArray(childData)) {
				console.warn('childData must be Array');
				return;
			}

			var extendFn = function extendFn(attrChildData) {
				// 以id标识 重复-覆盖,不存在-添加
				if (Array.isArray(attrChildData)) {
					var _ret8 = function () {
						var originIdMap = {};
						attrChildData.forEach(function (originItem, originIndex) {
							originIdMap[originItem.id] = originIndex;
						});
						childData.forEach(function (outputItem) {
							var exist = typeof originIdMap[outputItem.id] == 'undefined' ? false : true;
							if (exist) {
								console.warn('The child properties of ' + outputItem.id + ' is overwritten !');
								attrChildData[originIdMap[outputItem.id]] = extend(true, {}, outputItem);
							} else {
								attrChildData.push(extend(true, {}, outputItem));
							}
						});
						return {
							v: attrChildData
						};
					}();

					if ((typeof _ret8 === 'undefined' ? 'undefined' : _typeof(_ret8)) === "object") return _ret8.v;
				} else {
					return childData;
				}
				// return attrChildData
			};

			// 顶层直接放置
			if (id === '') {
				return extendFn(data);
			}

			//检测是否数字类型并转化
			if (typeof id == 'number') {
				console.warn(id + ' is number , its should be set to string');
				id = id.toString();
			}

			;(function addData(data) {
				data.forEach(function (item) {
					if (Array.isArray(item.child)) {
						addData(item.child);
					}
					if (item.id == id) {
						item.child = extendFn(item.child);
					}
				});
			})(data);
			return data;
		};
		//深层遍历
		TreeStore.treeMap = function (data, childName, fn, isReParent) {
			var temp_data = extend(true, [], data) //深复制数据源
			;(function dataMap(temp_data, parent_item) {
				temp_data.forEach(function (e) {
					if (isReParent) {
						var parent_data = extend(true, {}, parent_item);
						delete parent_data[childName];
						e['__TreeStore_parentArray'] = typeof parent_item == 'undefined' ? [] : parent_item['__TreeStore_parentArray'].concat(parent_data);
					}
					if (Array.isArray(e[childName])) {
						dataMap(e[childName], e);
					}
					fn(e);
				});
			})(temp_data);
			return temp_data;
		};
		//深层过滤
		TreeStore.treeFilter = function (data, childName, fn) {
			var temp_data = extend(true, [], data); //深复制数据源
			//深层递归过滤
			function filter(data, fn) {
				var deepFilter = function deepFilter(data, fn) {
					var output = [];
					data.map(function (item) {
						if (fn(item)) {
							if (Array.isArray(item[childName])) {
								item[childName] = deepFilter(item[childName], fn);
							}
							output.push(item);
						}
					});
					return output;
				};
				return deepFilter(data, fn);
			}
			var result_data = filter(temp_data, fn);

			return result_data;
		};

		module.exports = exports = TreeStore;

		/***/
	},
	/* 3 */
	/***/function (module, exports) {

		'use strict';

		var hasOwn = Object.prototype.hasOwnProperty;
		var toStr = Object.prototype.toString;

		var isArray = function isArray(arr) {
			if (typeof Array.isArray === 'function') {
				return Array.isArray(arr);
			}

			return toStr.call(arr) === '[object Array]';
		};

		var isPlainObject = function isPlainObject(obj) {
			if (!obj || toStr.call(obj) !== '[object Object]') {
				return false;
			}

			var hasOwnConstructor = hasOwn.call(obj, 'constructor');
			var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
			// Not own constructor property must be Object
			if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
				return false;
			}

			// Own properties are enumerated firstly, so to speed up,
			// if last one is own, then all properties are own.
			var key;
			for (key in obj) {/**/}

			return typeof key === 'undefined' || hasOwn.call(obj, key);
		};

		module.exports = function extend() {
			var options, name, src, copy, copyIsArray, clone;
			var target = arguments[0];
			var i = 1;
			var length = arguments.length;
			var deep = false;

			// Handle a deep copy situation
			if (typeof target === 'boolean') {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}
			if (target == null || (typeof target === "undefined" ? "undefined" : _typeof2(target)) !== 'object' && typeof target !== 'function') {
				target = {};
			}

			for (; i < length; ++i) {
				options = arguments[i];
				// Only deal with non-null/undefined values
				if (options != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent never-ending loop
						if (target !== copy) {
							// Recurse if we're merging plain objects or arrays
							if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
								if (copyIsArray) {
									copyIsArray = false;
									clone = src && isArray(src) ? src : [];
								} else {
									clone = src && isPlainObject(src) ? src : {};
								}

								// Never move original objects, clone them
								target[name] = extend(deep, clone, copy);

								// Don't bring in undefined values
							} else if (typeof copy !== 'undefined') {
								target[name] = copy;
							}
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		/***/
	},
	/* 4 */
	/***/function (module, exports) {

		"use strict";

		function unique_pred(list, compare) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i) {
				b = a;
				a = list[i];
				if (compare(a, b)) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique_eq(list) {
			var ptr = 1,
			    len = list.length,
			    a = list[0],
			    b = list[0];
			for (var i = 1; i < len; ++i, b = a) {
				b = a;
				a = list[i];
				if (a !== b) {
					if (i === ptr) {
						ptr++;
						continue;
					}
					list[ptr++] = a;
				}
			}
			list.length = ptr;
			return list;
		}

		function unique(list, compare, sorted) {
			if (list.length === 0) {
				return list;
			}
			if (compare) {
				if (!sorted) {
					list.sort(compare);
				}
				return unique_pred(list, compare);
			}
			if (!sorted) {
				list.sort();
			}
			return unique_eq(list);
		}

		module.exports = unique;

		/***/
	}
	/******/]);

/***/ }
/******/ ]);</script>
	</div>
	<div class="markrun-pre">
	<pre><code>
<span class="hljs-keyword">var</span> TreeStore = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tree-store'</span>) ;
<span class="hljs-keyword">var</span> demo12 = TreeStore(template_data).renderSelect({
    <span class="hljs-attr">checked</span> : [<span class="hljs-string">"1"</span>, <span class="hljs-string">"1_2"</span>, <span class="hljs-string">"1_2_1"</span>] ,
})
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"demo12 : \n"</span>,demo12)
<span class="hljs-comment">/*
[
        [
                {
                    "id" : "1",
                    "text" : "text-1",
                    "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
                },
                {
                    "id" : "2",
                    "text" : "text-2",
                    "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
                },
                {
                    "id" : "3",
                    "text" : "text-3",
                    "child" : []
                }
        ],
                [
                {
                    "id" : "1_1",
                    "text" : "text-1_1",
                    "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
                },
                {
                    "id" : "1_2",
                    "text" : "text-1_2",
                    "child" : [...]  //...是child中所有数据,为了更直观看到返回的数据结构,文档将其省略
                }
        ],
        [
                {
                    "id" : "1_2_1",
                    "text" : "text-1_2_1"
                },
                {
                    "id" : "1_2_2",
                    "text" : "text-1_2_2"
                }
        ]
]
*/</span>
</code></pre>
	</div>
</div>
<h2 id="-development">参与开发 - development</h2>
<pre><code class="lang-shell">npm i -g fis3 --registry=https : //registry.npm.taobao.org
<span class="hljs-comment"># 安装依赖</span>
npm <span class="hljs-keyword">run</span><span class="bash"> dep
</span><span class="hljs-comment"># 服务器</span>
npm <span class="hljs-keyword">run</span><span class="bash"> s
</span><span class="hljs-comment"># 开发</span>
npm <span class="hljs-keyword">run</span><span class="bash"> dev
</span>

<span class="hljs-comment"># 构建 gh-pages 版本 到 output/</span>
npm <span class="hljs-keyword">run</span><span class="bash"> gh
</span><span class="hljs-comment"># 将 output/** 发布到 gh-pages 分支</span>
npm <span class="hljs-keyword">run</span><span class="bash"> gh-push
</span><span class="hljs-comment"># 构建 npm 要发布的代码到 output/</span>
npm <span class="hljs-keyword">run</span><span class="bash"> npm</span>
</code></pre>
<blockquote>
<p>For npm owner :  npm publish Need to be in ./output</p>
</blockquote>

</body>
</html>
